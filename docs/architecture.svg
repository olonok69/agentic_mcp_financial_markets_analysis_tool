<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 650" width="900" height="650">
  <defs>
    <!-- Gradients -->
    <linearGradient id="streamlitGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FF4B4B;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#BD4043;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="fastapiGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#009688;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#00796B;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="smolagentsGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FFD21E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#F0A500;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="llmGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#10A37F;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#0D8A6A;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mcpClientGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#7C3AED;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#5B21B6;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="mcpServerGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#3B82F6;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#1D4ED8;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="strategyGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#6366F1;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#4338CA;stop-opacity:1" />
    </linearGradient>
    <linearGradient id="yahooGrad" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#720E9E;stop-opacity:1" />
      <stop offset="100%" style="stop-color:#5A0A7D;stop-opacity:1" />
    </linearGradient>
    
    <!-- Shadow filter -->
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="3" stdDeviation="3" flood-opacity="0.2"/>
    </filter>
    
    <!-- Arrow marker -->
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748B"/>
    </marker>
    <marker id="arrowheadBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3B82F6"/>
    </marker>
  </defs>
  
  <!-- Background -->
  <rect width="900" height="650" fill="#F8FAFC"/>
  
  <!-- Title -->
  <text x="450" y="35" font-family="Inter, system-ui, sans-serif" font-size="22" font-weight="700" fill="#1E293B" text-anchor="middle">MCP Financial Markets Analysis Tool - Architecture</text>
  
  <!-- Main container box -->
  <rect x="30" y="55" width="840" height="580" rx="12" fill="none" stroke="#E2E8F0" stroke-width="2" stroke-dasharray="8,4"/>
  <text x="50" y="80" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600" fill="#94A3B8">STOCK ANALYZER BOT</text>
  
  <!-- ==================== ROW 1: Streamlit ==================== -->
  <g filter="url(#shadow)">
    <rect x="350" y="95" width="200" height="70" rx="8" fill="url(#streamlitGrad)"/>
    <text x="450" y="125" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="700" fill="white" text-anchor="middle">STREAMLIT</text>
    <text x="450" y="145" font-family="Inter, system-ui, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">Web Interface (5 Tabs)</text>
  </g>
  
  <!-- Streamlit features -->
  <text x="580" y="115" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#64748B">üìà Technical</text>
  <text x="580" y="130" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#64748B">üîç Scanner</text>
  <text x="580" y="145" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#64748B">üìä Fundamental</text>
  <text x="670" y="115" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#64748B">üåê Multi-Sector</text>
  <text x="670" y="130" font-family="Inter, system-ui, sans-serif" font-size="10" fill="#64748B">üîÑ Combined</text>
  
  <!-- Arrow: Streamlit to FastAPI -->
  <line x1="450" y1="165" x2="450" y2="195" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="470" y="185" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#94A3B8">HTTP POST</text>
  
  <!-- ==================== ROW 2: FastAPI ==================== -->
  <g filter="url(#shadow)">
    <rect x="350" y="200" width="200" height="70" rx="8" fill="url(#fastapiGrad)"/>
    <text x="450" y="230" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="700" fill="white" text-anchor="middle">FASTAPI</text>
    <text x="450" y="250" font-family="Inter, system-ui, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">REST API Backend</text>
  </g>
  
  <!-- API endpoints -->
  <text x="580" y="220" font-family="monospace" font-size="9" fill="#64748B">/technical</text>
  <text x="580" y="235" font-family="monospace" font-size="9" fill="#64748B">/scanner</text>
  <text x="580" y="250" font-family="monospace" font-size="9" fill="#64748B">/fundamental</text>
  <text x="670" y="220" font-family="monospace" font-size="9" fill="#64748B">/multisector</text>
  <text x="670" y="235" font-family="monospace" font-size="9" fill="#64748B">/combined</text>
  
  <!-- Arrow: FastAPI to smolagents -->
  <line x1="450" y1="270" x2="450" y2="300" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- ==================== ROW 3: smolagents + LLM ==================== -->
  <g filter="url(#shadow)">
    <rect x="250" y="305" width="200" height="80" rx="8" fill="url(#smolagentsGrad)"/>
    <text x="350" y="335" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="700" fill="#1E293B" text-anchor="middle">SMOLAGENTS</text>
    <text x="350" y="355" font-family="Inter, system-ui, sans-serif" font-size="11" fill="rgba(0,0,0,0.7)" text-anchor="middle">ToolCallingAgent</text>
    <text x="350" y="372" font-family="Inter, system-ui, sans-serif" font-size="10" fill="rgba(0,0,0,0.6)" text-anchor="middle">AI Orchestration</text>
  </g>
  
  <!-- LLM Box -->
  <g filter="url(#shadow)">
    <rect x="500" y="305" width="180" height="80" rx="8" fill="url(#llmGrad)"/>
    <text x="590" y="335" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="700" fill="white" text-anchor="middle">LLM API</text>
    <text x="590" y="355" font-family="Inter, system-ui, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">OpenAI / HuggingFace</text>
    <text x="590" y="372" font-family="Inter, system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.8)" text-anchor="middle">gpt-4o, Llama, etc.</text>
  </g>
  
  <!-- Bidirectional arrow: smolagents <-> LLM -->
  <line x1="450" y1="335" x2="495" y2="335" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <line x1="495" y1="355" x2="450" y2="355" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="472" y="325" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#94A3B8">Prompt</text>
  <text x="472" y="375" font-family="Inter, system-ui, sans-serif" font-size="8" fill="#94A3B8">Response</text>
  
  <!-- Arrow: smolagents to MCP Client -->
  <line x1="350" y1="385" x2="350" y2="415" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="370" y="405" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#94A3B8">Tool Calls</text>
  
  <!-- ==================== ROW 4: MCP Client ==================== -->
  <g filter="url(#shadow)">
    <rect x="250" y="420" width="200" height="65" rx="8" fill="url(#mcpClientGrad)"/>
    <text x="350" y="448" font-family="Inter, system-ui, sans-serif" font-size="14" font-weight="700" fill="white" text-anchor="middle">MCP CLIENT</text>
    <text x="350" y="468" font-family="Inter, system-ui, sans-serif" font-size="11" fill="rgba(255,255,255,0.9)" text-anchor="middle">tools.py + mcp_client.py</text>
  </g>
  
  <!-- Arrow: MCP Client to MCP Server -->
  <line x1="350" y1="485" x2="350" y2="515" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrowheadBlue)"/>
  <text x="370" y="505" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#3B82F6" font-weight="600">stdio</text>
  
  <!-- ==================== MCP SERVER SECTION ==================== -->
  <rect x="80" y="520" width="740" height="100" rx="10" fill="#EFF6FF" stroke="#BFDBFE" stroke-width="2"/>
  <text x="100" y="545" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="600" fill="#1E40AF">MCP SERVER (server/main.py)</text>
  
  <!-- MCP Server Box -->
  <g filter="url(#shadow)">
    <rect x="100" y="555" width="160" height="55" rx="6" fill="url(#mcpServerGrad)"/>
    <text x="180" y="578" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="700" fill="white" text-anchor="middle">FastMCP</text>
    <text x="180" y="595" font-family="Inter, system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Tool Registry</text>
  </g>
  
  <!-- Arrow: MCP Server to Strategies -->
  <line x1="260" y1="582" x2="295" y2="582" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Strategies Box -->
  <g filter="url(#shadow)">
    <rect x="300" y="555" width="280" height="55" rx="6" fill="url(#strategyGrad)"/>
    <text x="440" y="575" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="700" fill="white" text-anchor="middle">STRATEGIES</text>
    <text x="440" y="595" font-family="Inter, system-ui, sans-serif" font-size="9" fill="rgba(255,255,255,0.9)" text-anchor="middle">Bollinger-Fib | MACD-Donchian | Connors | Dual MA | Fundamental</text>
  </g>
  
  <!-- Arrow: Strategies to Yahoo -->
  <line x1="580" y1="582" x2="615" y2="582" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Yahoo Finance Box -->
  <g filter="url(#shadow)">
    <rect x="620" y="555" width="180" height="55" rx="6" fill="url(#yahooGrad)"/>
    <text x="710" y="578" font-family="Inter, system-ui, sans-serif" font-size="12" font-weight="700" fill="white" text-anchor="middle">YAHOO FINANCE</text>
    <text x="710" y="595" font-family="Inter, system-ui, sans-serif" font-size="10" fill="rgba(255,255,255,0.9)" text-anchor="middle">Market Data API</text>
  </g>
  
  <!-- Legend -->
  <rect x="700" y="95" width="150" height="85" rx="6" fill="white" stroke="#E2E8F0" stroke-width="1"/>
  <text x="775" y="113" font-family="Inter, system-ui, sans-serif" font-size="10" font-weight="600" fill="#475569" text-anchor="middle">DATA FLOW</text>
  <line x1="720" y1="128" x2="760" y2="128" stroke="#64748B" stroke-width="2" marker-end="url(#arrowhead)"/>
  <text x="770" y="132" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#64748B">Request</text>
  <line x1="720" y1="148" x2="760" y2="148" stroke="#3B82F6" stroke-width="2" marker-end="url(#arrowheadBlue)"/>
  <text x="770" y="152" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#3B82F6">MCP Protocol</text>
  <rect x="720" y="163" width="12" height="12" rx="2" fill="#FFD21E"/>
  <text x="740" y="173" font-family="Inter, system-ui, sans-serif" font-size="9" fill="#64748B">AI Layer</text>
  
  <!-- File labels -->
  <text x="140" y="120" font-family="monospace" font-size="9" fill="#94A3B8">streamlit_app.py</text>
  <text x="140" y="225" font-family="monospace" font-size="9" fill="#94A3B8">api.py</text>
  <text x="100" y="340" font-family="monospace" font-size="9" fill="#94A3B8">main.py</text>
  <text x="100" y="455" font-family="monospace" font-size="9" fill="#94A3B8">tools.py</text>
</svg>